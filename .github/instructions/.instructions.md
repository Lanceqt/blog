---
applyTo: "**/*.php"
---
# Project coding standards for PHP

## Project Information
- Created by: Lanceqt

## Personal Goals
I'm building this project to learn modern PHP development. My approach is:

- Build everything from scratch without relying on plugins or external libraries unless absolutely necessary
- Use the newest PHP features and syntax available to learn modern practices
- Use FrankenPHP as the server runtime environment
- Implement SQLite3 for the database to keep things simple but educational
- Write clear, well-documented code that I can understand and learn from
- The AI agent should act as a coding buddy/pair programmer - guiding me, offering suggestions, and explaining concepts, but not doing the work for me
- Focus on learning the fundamentals before adding complexity

## Coding Style
- Follow the PSR-12 Guide for PHP
- Use 4 spaces for indentation, not tabs
- Line length should not exceed 120 characters
- Files must use only UTF-8 without BOM
- Files should either declare symbols (classes, functions, constants) or cause side-effects, but not both

## Naming Conventions
- Classes should use UpperCamelCase (e.g., `UserAuthentication`)
- Methods and functions should use camelCase (e.g., `getUserById()`)
- Constants should be all uppercase with underscores (e.g., `MAX_LOGIN_ATTEMPTS`)
- Variables should use camelCase (e.g., `$userEmail`)
- Private/protected properties should be prefixed with underscore (e.g., `$_internalState`)

## Documentation
- All classes and methods must have PHPDoc blocks
- Include `@param`, `@return`, and `@throws` tags where applicable
- Document any non-obvious behavior or implementation details
- Example:
```php
/**
 * Authenticates a user with the provided credentials
 *
 * @param string $username The user's username
 * @param string $password The user's password
 * @return bool True if authentication successful, false otherwise
 * @throws AuthenticationException If the authentication service is unavailable
 */
public function authenticate(string $username, string $password): bool
{
    // Implementation
}
```

## Modern PHP Practices
- Use PHP 8.x features where appropriate (named arguments, attributes, union types, etc.)
- Utilize type declarations for parameters, properties, and return values
- Prefer newer language constructs over legacy alternatives
- Implement interfaces and traits to promote code reusability

## SQLite3 Database Usage
- Use PDO with prepared statements for all database operations
- Create clear database schema with appropriate indexes
- Keep queries optimized and documented
- Implement a simple data access layer to separate database logic from business logic

## Security
- Always validate and sanitize user input
- Use prepared statements for database queries
- Never expose sensitive information in error messages
- Implement proper CSRF protection for forms
- Use appropriate password hashing (e.g., password_hash)

## Error Handling
- Use exceptions for error handling where appropriate
- Create custom exception classes for different error types
- Log errors with appropriate context information
- Avoid suppressing errors with @ operator

## Testing
- Write unit tests for all public methods
- Maintain at least 80% code coverage
- Mock external dependencies in tests
- Test both happy paths and edge cases

## Performance
- Avoid unnecessary database queries
- Use caching where appropriate
- Optimize loops and data structures for large datasets
- Profile code regularly to identify bottlenecks

## Version Control
- Write meaningful commit messages
- Keep pull requests focused on a single feature or fix
- Reference issue numbers in commit messages when applicable

## Learning-Focused Development
- Comment code extensively, especially for complex logic
- Document learning points and discoveries in code comments
- Break complex problems into smaller, manageable pieces
- Implement one feature at a time, fully understanding it before moving on